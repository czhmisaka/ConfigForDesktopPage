import{A as K,a$ as L,b0 as n,aW as z,bG as A,a_ as k,a2 as I,I as y,J as a,Z as F,U as c,N as m,S as $,K as i,O as B,P as S,bH as R,T as b,L as V,V as D,M as P,W as C,X as r,Q as E,R as g}from"./index-51f9d840.js";const M=Math.floor(Math.random()*1e7),T=K({componentInfo:{labelNameCN:"\u83DC\u5355\u5217\u8868\u7EC4\u4EF6(\u8FDC\u7A0B\u6570\u636E)",key:"menuListRemote",description:"\u66F4\u5177\u8F93\u5165\u7684menuData\u5C55\u793A\u5217\u8868\uFF0C\u70B9\u51FB\u8F93\u51FA\u5BF9\u5E94\u7684\u5355\u5143\u5BF9\u8C61",gridInfo:{middle:L(3,8)}},propsDetail:{treeDataFuncByLevel:{label:"\u6811\u72B6\u5217\u8868\u6570\u636E\uFF08\u6309\u7167\u5BF9\u8C61\u83B7\u53D6\uFF09",description:"\u5C55\u5F00\u8282\u70B9\u65F6\u624D\u4F1A\u52A0\u8F7D\u5B50\u8282\u70B9\u5217\u8868\uFF0C\u7528\u4E8E\u5E94\u5BF9\u5927\u6570\u636E\u5C55\u793A\u7684\u60C5\u51B5\uFF0C\u907F\u514D\u5E26\u5BBD\u6D88\u8017",type:n.functionEditor},outputKey:{label:"baseData\u8F93\u51FAkey",type:n.text},defaultProps:{label:"\u6570\u636E\u66FF\u6362\u65B9\u6848",description:"\u53C2\u8003\u6587\u6863\uFF1Ahttps://element-plus.org/zh-CN/component/tree.html#props",type:n.obj},clickItemDetailFunc:{label:"\u70B9\u51FB\u5143\u7D20\u8BE6\u60C5\u4E8B\u4EF6",description:"\u4E00\u822C\u7528\u4E8E\u5C55\u793A\u5143\u7D20\u5F39\u7A97\u7B49",type:n.functionEditor},showCheckbox:{label:"\u6811\u5F62\u7ED3\u6784\u9009\u62E9",type:n.boolean},clickItemFunc:{label:"\u70B9\u51FB\u5143\u7D20\u8BE6\u60C5\u4E8B\u4EF6",description:"\u4E00\u822C\u7528\u4E8E\u5C55\u793A\u5143\u7D20\u5F39\u7A97\u7B49",type:n.functionEditor},searchFuncByName:{label:"\u641C\u7D22\u4E8B\u4EF6\uFF08\u540D\u79F0\uFF09",description:"\u4E00\u822C\u7528\u4E8E\u590D\u5408\u641C\u7D22",type:n.functionEditor},searchBtn:{label:"\u5B9A\u5236\u6309\u94AE1",type:n.obj},selectListChangeFunc:{label:"\u9009\u9879\u53D8\u6362\u540E\u5904\u7406\u51FD\u6570",type:n.functionEditor}},baseProps:{outputKey:"menuSelectCell",defaultProps:{children:"children",label:"label"}},props:["baseData","sizeUnit","outputKey","showCheckbox","defaultProps","treeDataFuncByLevel","clickItemDetailFunc","clickItemFunc","searchFuncPlaceHolder","searchBtn","searchFuncByName","selectListChangeFunc","checkStrictly"],components:{cardBg:z},watch:{selectedKey(e){this.searchResult=[]}},data:()=>({selectedList:[],treeData:[],searchResult:[],selectedKey:"",random:M,size:"small"}),async mounted(){await this.init(),this.$emit("ready")},methods:{isBtnShow(e){const t=this;return e.isShow(t,e)},async nodeClick(e){let t=this.outputKey||"menuList_output",s={};const l=this;s[t]=JSON.parse(JSON.stringify(e)),this.clickItemFunc&&await this.clickItemFunc(l,e),A(this,s)},async init(){const e=this;setTimeout(()=>{const t=document.querySelector(`.box_${e.random} .custom-tree-node`);"click"in t&&t.click()},500)},async search(){const e=this,t=s=>{e.searchResult=s.length>1?s.reduce((l,o)=>{let d=[];return o.children&&(d=o.children,delete o.children),l.length?l.concat(o).concat(d):[l].concat(o).concat(d)}):s};this.treeDataFuncByLevel({},t,this.selectedKey,this)},async treeDataFuncByLevelFunc(e,t,s){await this.treeDataFuncByLevel(e,t,s,this)},async clickItemDetail(e){const t=this;this.clickItemDetailFunc&&this.clickItemDetailFunc(t,e)},checkChange(e,t,s,l){this.selectListChangeFunc(this,e,t,s,l)},async btnClick(e,t){if(e.isLoading=!0,e.type==k.OpenDrawer)this.$modules.getModuleApi().userManage_openDrawerForm(this,e.drawerProps);else if(e.type==k.Function&&e.function){let s=this;await e.function(s,t),this.$emit("search")}else e.type==k.Url&&window.open(e.url);e.isLoading=!1},async searchByName(){if(this.searchFuncByName){let e=await this.searchFuncByName(this.selectedKey);this.searchResult=e}}}});const U={key:0,class:"searchBar"},O={key:1,class:"content"},H={class:"flexItem"},J={key:2,class:"content"},j={class:"custom-tree-node"},W={class:"text"};function _(e,t,s,l,o,d){const v=y("el-input"),h=y("el-button"),f=y("cardBg"),w=y("el-tree");return a(),F(f,{cusStyle:{padding:"12px"}},{default:c(()=>[m("div",{class:$(`menuBox box_${e.random}`)},[e.searchFuncByName?(a(),i("div",U,[B(v,{style:S({width:"100%",marginRight:e.searchBtn||e.selectedKey!=""?"6px":""}),placeholder:e.searchFuncPlaceHolder||"\u641C\u7D22",modelValue:e.selectedKey,"onUpdate:modelValue":t[0]||(t[0]=u=>e.selectedKey=u),size:e.size,onKeydown:t[1]||(t[1]=R(b(u=>e.searchFuncByName?e.searchByName():e.search(),["prevent"]),["enter"])),clearable:""},null,8,["style","placeholder","modelValue","size"]),V(B(h,{onClick:t[2]||(t[2]=u=>e.searchFuncByName?e.searchByName():e.search()),size:e.size,plain:"",type:"primary"},{default:c(()=>[D(" \u641C\u7D22 ")]),_:1},8,["size"]),[[P,e.selectedKey&&e.selectedKey.length>0]]),e.searchBtn&&e.isBtnShow(e.searchBtn)&&e.selectedKey.length==0?(a(),F(h,{key:0,style:{"margin-left":"0px"},size:e.size,loading:e.searchBtn.isLoading,type:e.searchBtn.elType,plain:"",onClick:t[3]||(t[3]=u=>e.btnClick(e.searchBtn))},{default:c(()=>[D(C(e.searchBtn.label),1)]),_:1},8,["size","loading","type"])):r("",!0)])):r("",!0),e.searchResult.length!=0&&e.selectedKey?(a(),i("div",O,[(a(!0),i(E,null,g(e.searchResult,u=>(a(),i("div",null,[B(f,{title:u.label,"title-icon":u.icon,"cus-style":{margin:"9px 3px",width:"calc(100% - 6px)",borderRadius:"3px",padding:"6px",filter:"drop-shadow(rgba(0, 0, 0, 0.05) 0px 0px 1px)"}},{default:c(()=>[(a(!0),i(E,null,g(u.data,p=>(a(),i("div",H,[m("div",null,C(p.label),1),u.btn?(a(),F(h,{key:0,onClick:N=>e.btnClick(u.btn,p),type:u.btn.elType,icon:u.btn.icon,size:"small",plain:"",text:""},{default:c(()=>[D(C(u.btn.label),1)]),_:2},1032,["onClick","type","icon"])):r("",!0)]))),256))]),_:2},1032,["title","title-icon","cus-style"])]))),256))])):r("",!0),e.searchResult.length==0&&e.selectedKey==""?(a(),i("div",J,[B(w,{ref:"fuckElTree",modelValue:e.treeData,"onUpdate:modelValue":t[4]||(t[4]=u=>e.treeData=u),props:e.defaultProps,lazy:!0,load:e.treeDataFuncByLevelFunc,"show-checkbox":e.showCheckbox,onNodeClick:e.nodeClick,onCheck:e.checkChange,"node-key":"id","check-strictly":e.checkStrictly},{default:c(({node:u,data:p})=>[m("div",j,[m("div",W,C(u.label),1),e.clickItemDetailFunc?(a(),F(h,{key:0,text:"",size:"small",icon:"More",class:"btns",onClick:b(N=>e.clickItemDetail(p),["stop"])},null,8,["onClick"])):r("",!0)])]),_:1},8,["modelValue","props","load","show-checkbox","onNodeClick","onCheck","check-strictly"])])):r("",!0)],2)]),_:1})}const G=I(T,[["render",_],["__scopeId","data-v-a17993a4"]]);export{G as default};
